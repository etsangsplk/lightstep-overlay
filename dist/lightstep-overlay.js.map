{"version":3,"sources":["webpack:///webpack/bootstrap 3f5b46bc61e419160866","webpack:///./src/overlay.js"],"names":[],"mappings":"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","file":"lightstep-overlay.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3f5b46bc61e419160866\n **/","//\n// Provide an HTML debug overlay DIV with status information about the running\n// cruntime.\n//\nlet gDebugOverlayEnabled = false;\n\n// NOTE: this relies directly on the LightStep implementation and not on the\n// OpenTracing APIs\nupdateDebugOverlay(Tracer.imp(), true);\n\nconst HOST_DIV_ID = 'lightstep_overlay';\n\nfunction updateDebugOverlay(tracer, enabled) {\n    // Ignore the case of debugging being enabled then disabled for\n    // reasons of engineering prioritization (not correctness!).\n    if (!enabled) {\n        return;\n    }\n    if (!tracer) {\n        return;\n    }\n    if (gDebugOverlayEnabled) {\n        return;\n    }\n\n    gDebugOverlayEnabled = true;\n\n    tracer.on('report', function (report) {\n        let spans = report.span_records;\n        if (!spans || spans.length === 0) {\n            return;\n        }\n\n\n        let container, link, logo, div, count;\n        let opts = tracer.options();\n        let kMaxSpans = 4;\n        let totalLinks = 0;\n\n\n        // Make a guess about whether we are reporting to a dev instance or not\n        // based on the ports being used.\n        let url;\n        if (opts.collector_port >= 9997 && opts.collector_port <= 9998) {\n            url = `http://${window.location.hostname}:${window.location.port}/${opts.access_token}/`;\n        } else {\n            let host = opts.collector_host;\n            if (host.match(/^collector[.-]/)) {\n                host = host.replace(/^collector([.-])/, 'app$1');\n            }\n            url = `https://${host}/${opts.access_token}/`;\n        }\n\n        // Check if the element is there, as some in-page script might have\n        // cleared the BODY, etc.\n        let overlay = document.getElementById(HOST_DIV_ID);\n        if (!overlay) {\n            container = document.createElement('a');\n            container.href = url + 'latest?q=tracer.guid:' + spans[0].runtime_guid;\n            container.style.position = 'fixed';\n            container.style.bottom = '2em';\n            container.style.right = '2em';\n            container.style.width = '3em';\n            container.style.height = '3em';\n            container.style.borderRadius = '3em';\n            container.style.cursor = 'pointer';\n            container.style.background = 'rgb(0, 163, 255)';\n            container.style.boxShadow = '0 0 0 1px #c4c4c4, 0 2px 20px 0 #e2e2e2';\n            container.style.transition = '.2s all';\n            container.style.transform = 'scale(0)';\n            container.style.opacity = '0';\n\n\n            let btn = document.createElement('div');\n            btn.style.width = '100%';\n            btn.style.height = '100%';\n            btn.style.display = 'block';\n            btn.style.borderRadius = '3em';\n            btn.style.background = 'linear-gradient(to bottom right,#00d6ff,#3b6fcb 90%)';\n            btn.style.opacity = '0';\n            btn.style.boxShadow = '0 0 0 0 transparent';\n            btn.style.transition = '.5s all';\n\n            let badge = document.createElement('div');\n            badge.style.width = '.75em';\n            badge.style.height = '.75em';\n            badge.style.borderRadius = '1em';\n            badge.style.background = 'red';\n            badge.style.position = 'absolute';\n            badge.style.top = '0em';\n            badge.style.right = '0em';\n\n\n            logo = document.createElement('img');\n            logo.src = 'http://imgur.com/brQx4rK.png';\n            logo.style.width = '2em';\n            logo.style.position = 'absolute';\n            logo.style.top = '.925em';\n            logo.style.left = '.5em';\n\n            count = document.createElement('div');\n            count.style.fontSize = '.75em';\n            count.style.position = 'absolute';\n            count.style.top = '-.4rem';\n            count.style.right = '-.4rem';\n            count.style.minWidth = '1.2rem';\n            count.style.height = '1.2rem';\n            count.style.paddingTop = '.2rem';\n            count.style.borderRadius = '1.2em';\n            count.style.textAlign = 'center';\n            count.style.backgroundColor = '#ff7a7a';\n            count.style.color = '#FFF';\n\n            container.onmouseenter = function (e) {\n                btn.style.background = 'linear-gradient(to bottom right,#00d6ff,#3b6fcb 90%)';\n                btn.style.boxShadow = 'inset 0 0 0 2px #FFF, inset 0 0 0 3px rgb(29, 184, 228)';\n                btn.style.opacity = '1';\n                container.style.boxShadow = 'rgb(196, 196, 196) 0px 0px 0px 1px, rgb(184, 184, 184) 0px 4px 30px 0px';\n                container.style.opacity = '1';\n                count.innerHTML = 'x';\n            };\n\n            container.onmouseleave = function (e) {\n                btn.style.boxShadow = '0 0 0 0 transparent';\n                btn.style.opacity = '0';\n                container.style.boxShadow = '0 0 0 1px #c4c4c4, 0 2px 20px 0 #e2e2e2';\n                container.style.opacity = '.9';\n                count.innerHTML = totalLinks;\n            };\n\n            count.onclick = function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                container.style.transform = 'scale(0)';\n                container.style.opacity = '0';\n            };\n\n            container.appendChild(btn);\n            container.appendChild(logo);\n            container.appendChild(count);\n\n            overlay = document.createElement('div');\n            overlay.id = HOST_DIV_ID;\n            let close = document.createElement('div');\n            link = document.createElement('a');\n            link.href = url;\n            let title = document.createElement('div');\n            title.appendChild(link);\n            title.appendChild(close);\n            overlay.appendChild(title);\n\n            document.body.appendChild(overlay);\n            document.body.appendChild(container);\n\n            //once all that stuff is done\n            container.style.opacity = '0';\n\n            window.getComputedStyle(container).opacity;\n\n            container.style.transform = 'scale(1)';\n            container.style.opacity = '1';\n        }\n\n\n        for (let i = 0; i < overlay.childNodes.length; i++) {\n            let child = overlay.childNodes[i];\n            if (child.className == 'lightstep_span') {\n                totalLinks++;\n            }\n        }\n        // If we've already added kMaxSpans+1 lines below the\n        // 'header', then don't add anything else.\n        if (totalLinks > kMaxSpans) {\n            return;\n        }\n\n        // Do a primitive trace joining here: only show one link per\n        // trace (i.e. one link per set of spans that will be\n        // combined). We make the (possibly not true) assumptions that\n        // all spans in a trace will arrive in the same event and that\n        // all span share a join id (just to keep things simple).\n        let joinedSpans = [];\n        for (let i = 0; i < spans.length; i++) {\n            joinedSpans.push({\n                summary         : spans[i].span_name,\n                oldest_micros   : spans[i].oldest_micros,\n                youngest_micros : spans[i].youngest_micros,\n                span_guid       : spans[i].span_guid,\n            });\n        }\n        for (let i = 0; i < joinedSpans.length; i++) {\n            for (let j = i + 1; j < joinedSpans.length; j++) {\n                if ((joinedSpans[j].oldest_micros <= joinedSpans[i].youngest_micros &&\n                     joinedSpans[j].youngest_micros >= joinedSpans[i].oldest_micros)) {\n                    if (joinedSpans[j].oldest_micros < joinedSpans[i].oldest_micros) {\n                        joinedSpans[i].summary = joinedSpans[j].summary + ', ' + joinedSpans[i].summary;\n                        joinedSpans[i].oldest_micros = joinedSpans[j].oldest_micros;\n                    } else {\n                        joinedSpans[i].summary += ', ' + joinedSpans[j].summary;\n                    }\n                    if (joinedSpans[j].youngest_micros > joinedSpans[i].youngest_micros) {\n                        joinedSpans[i].youngest_micros = joinedSpans[j].youngest_micros;\n                    }\n                    joinedSpans[j] = joinedSpans[joinedSpans.length - 1];\n                    joinedSpans = joinedSpans.slice(0, joinedSpans.length - 1);\n                    j = i;\n                }\n            }\n        }\n\n        for (let i = 0; i < joinedSpans.length && totalLinks <= kMaxSpans; i++) {\n            let span = joinedSpans[i];\n\n            totalLinks++;\n            count.innerHTML = totalLinks;\n        }\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/overlay.js\n **/"],"sourceRoot":""}